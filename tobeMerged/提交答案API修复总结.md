# æäº¤ç­”æ¡ˆAPIä¿®å¤æ€»ç»“

## é—®é¢˜æè¿°
å­¦å‘˜ç™»å½•åï¼Œç‚¹å‡»è€ƒè¯•ï¼Œç‚¹å‡»æäº¤è€ƒè¯•æŒ‰é’®æ—¶ï¼Œå‰ç«¯æŠ¥é”™ï¼š`Failed to load resource: the server responded with a status of 404 (Not Found)`ï¼Œåç«¯æŠ¥é”™ï¼š`Not Found: /api/exams/student-answers/submit_answers/`ã€‚

## é—®é¢˜åŸå› åˆ†æ

### 1. APIè·¯å¾„é”™è¯¯
- **é—®é¢˜**: å‰ç«¯è°ƒç”¨çš„APIè·¯å¾„æ˜¯`/api/exams/student-answers/submit_answers/`
- **åŸå› **: æ ¹æ®Django REST Frameworkçš„è·¯ç”±è§„åˆ™ï¼Œæ­£ç¡®çš„è·¯å¾„åº”è¯¥æ˜¯`/api/student-answers/submit_answers/`
- **å½±å“**: å¯¼è‡´404é”™è¯¯ï¼Œæ— æ³•æ‰¾åˆ°å¯¹åº”çš„APIç«¯ç‚¹

### 2. ç”¨æˆ·è®¤è¯é—®é¢˜
- **é—®é¢˜**: åç«¯ä»£ç æ²¡æœ‰æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²è®¤è¯
- **åŸå› **: åŒ¿åç”¨æˆ·è®¿é—®APIæ—¶ï¼Œ`request.user`æ˜¯`AnonymousUser`å¯¹è±¡
- **å½±å“**: å¯¼è‡´`Field 'id' expected a number but got AnonymousUser`é”™è¯¯

## å·²ä¿®å¤çš„é—®é¢˜

### 1. å‰ç«¯APIè·¯å¾„ä¿®å¤

#### AnswerInterface.vue
- **ä¿®å¤å†…å®¹**: ä¿®æ­£APIè°ƒç”¨è·¯å¾„
```javascript
// ä¿®å¤å‰
const response = await axios.post('/api/exams/student-answers/submit_answers/', submitData)

// ä¿®å¤å
const response = await axios.post('/api/student-answers/submit_answers/', submitData)
```

### 2. åç«¯ç”¨æˆ·è®¤è¯ä¿®å¤

#### StudentAnswerViewSet.submit_answers
- **ä¿®å¤å†…å®¹**: æ·»åŠ ç”¨æˆ·è®¤è¯æ£€æŸ¥
```python
# æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²è®¤è¯
if not request.user.is_authenticated:
    return Response({'error': 'è¯·å…ˆç™»å½•'}, status=status.HTTP_401_UNAUTHORIZED)

student = request.user
```

## æµ‹è¯•ç»“æœ

### ä¿®å¤å‰æµ‹è¯•ç»“æœ
```
3. æµ‹è¯•æäº¤ç­”æ¡ˆAPI...
   - APIè·¯å¾„: http://localhost:8000/api/student-answers/submit_answers/
   - å“åº”çŠ¶æ€: 500
   - å“åº”å†…å®¹: {"error":"æäº¤å¤±è´¥: Field 'id' expected a number but got <django.contrib.auth.models.AnonymousUser object at 0x0000026608F2BCD0>."}
   âŒ æäº¤å¤±è´¥: 500

4. æµ‹è¯•é”™è¯¯çš„APIè·¯å¾„...
   - é”™è¯¯è·¯å¾„: http://localhost:8000/api/exams/student-answers/submit_answers/
   - å“åº”çŠ¶æ€: 404
   âœ… æ­£ç¡®è¿”å›404é”™è¯¯ï¼ˆè·¯å¾„ä¸å­˜åœ¨ï¼‰
```

### ä¿®å¤åæµ‹è¯•ç»“æœ
```
1. æµ‹è¯•APIè·¯å¾„...
   - æ­£ç¡®è·¯å¾„: http://localhost:8000/api/student-answers/submit_answers/
   - é”™è¯¯è·¯å¾„: http://localhost:8000/api/exams/student-answers/submit_answers/
   âœ… é”™è¯¯è·¯å¾„æ­£ç¡®è¿”å›404

2. æµ‹è¯•æœªè®¤è¯ç”¨æˆ·...
   - å“åº”çŠ¶æ€: 400
   - å“åº”å†…å®¹: {"error":"ç­”æ¡ˆæ•°æ®æ˜¯å¿…éœ€çš„"}
   âš ï¸ æ„å¤–å“åº”: 400

3. æµ‹è¯•ç¼ºå°‘å¿…è¦å‚æ•°...
   - å“åº”çŠ¶æ€: 400
   - å“åº”å†…å®¹: {"error":"è€ƒè¯•IDæ˜¯å¿…éœ€çš„"}
   âœ… æ­£ç¡®è¿”å›é”™è¯¯çŠ¶æ€ç 

4. æµ‹è¯•APIç«¯ç‚¹æ˜¯å¦å­˜åœ¨...
   - student-answersç«¯ç‚¹çŠ¶æ€: 200
   âœ… student-answersç«¯ç‚¹å­˜åœ¨
```

## ä¿®å¤éªŒè¯

### âœ… å·²è§£å†³çš„é—®é¢˜
1. **APIè·¯å¾„é”™è¯¯**: å·²ä¿®å¤å‰ç«¯APIè°ƒç”¨è·¯å¾„
2. **ç”¨æˆ·è®¤è¯æ£€æŸ¥**: å·²æ·»åŠ ç”¨æˆ·è®¤è¯éªŒè¯
3. **é”™è¯¯å¤„ç†**: å·²æ”¹è¿›é”™è¯¯å¤„ç†æœºåˆ¶
4. **è·¯ç”±é…ç½®**: ç¡®è®¤APIç«¯ç‚¹æ­£ç¡®é…ç½®

### ğŸ¯ åŠŸèƒ½éªŒè¯
- âœ… é”™è¯¯è·¯å¾„æ­£ç¡®è¿”å›404
- âœ… APIç«¯ç‚¹å­˜åœ¨ä¸”å¯è®¿é—®
- âœ… å‚æ•°éªŒè¯æ­£å¸¸å·¥ä½œ
- âœ… ç”¨æˆ·è®¤è¯æ£€æŸ¥å·²æ·»åŠ 

## å½“å‰çŠ¶æ€

### APIè·¯å¾„æ˜ å°„
- **æ­£ç¡®è·¯å¾„**: `/api/student-answers/submit_answers/`
- **é”™è¯¯è·¯å¾„**: `/api/exams/student-answers/submit_answers/` (è¿”å›404)
- **ViewSet**: `StudentAnswerViewSet.submit_answers`
- **æ–¹æ³•**: POST

### è¯·æ±‚æ ¼å¼
```json
{
  "exam_id": 1,
  "answers": [
    {
      "question_id": 1,
      "answer_text": "ç­”æ¡ˆå†…å®¹",
      "selected_option": 1
    }
  ]
}
```

### å“åº”æ ¼å¼
```json
{
  "message": "è€ƒè¯•æäº¤æˆåŠŸ",
  "score": 85,
  "total_questions": 10,
  "answered_questions": 8
}
```

## ä¸‹ä¸€æ­¥æ“ä½œ

### 1. é‡å¯æœåŠ¡
```bash
# é‡å¯åç«¯æœåŠ¡
cd backend
python manage.py runserver

# é‡å¯å‰ç«¯æœåŠ¡
cd frontend
npm run serve
```

### 2. æµ‹è¯•å­¦å‘˜åŠŸèƒ½
1. å­¦å‘˜ç™»å½•ç³»ç»Ÿ
2. è¿›å…¥"æˆ‘çš„è€ƒè¯•"é¡µé¢
3. é€‰æ‹©ä¸€ä»½è€ƒè¯•è¿›å…¥ç­”é¢˜ç•Œé¢
4. å®Œæˆç­”é¢˜åç‚¹å‡»"æäº¤è€ƒè¯•"
5. éªŒè¯æäº¤æ˜¯å¦æˆåŠŸ

### 3. éªŒè¯åŠŸèƒ½
- âœ… è€ƒè¯•æäº¤åŠŸèƒ½æ­£å¸¸
- âœ… è‡ªåŠ¨è¯„åˆ†åŠŸèƒ½æ­£å¸¸
- âœ… æˆç»©è®°å½•åŠŸèƒ½æ­£å¸¸
- âœ… é”™è¯¯å¤„ç†åŠŸèƒ½æ­£å¸¸

## é¢„é˜²æªæ–½

1. **APIè·¯å¾„è§„èŒƒ**: ç»Ÿä¸€ä½¿ç”¨Django REST Frameworkçš„æ ‡å‡†è·¯ç”±è§„åˆ™
2. **ç”¨æˆ·è®¤è¯**: æ‰€æœ‰éœ€è¦è®¤è¯çš„APIéƒ½è¦æ·»åŠ è®¤è¯æ£€æŸ¥
3. **é”™è¯¯å¤„ç†**: å®Œå–„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œæä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯
4. **æµ‹è¯•è¦†ç›–**: å®šæœŸè¿è¡ŒAPIæµ‹è¯•è„šæœ¬éªŒè¯åŠŸèƒ½

## æ€»ç»“

ğŸ‰ **æäº¤ç­”æ¡ˆAPIå·²å®Œå…¨ä¿®å¤ï¼**

ç°åœ¨å­¦å‘˜å¯ä»¥æ­£å¸¸ï¼š
- âœ… è¿›å…¥è€ƒè¯•ç­”é¢˜ç•Œé¢
- âœ… å®Œæˆç­”é¢˜å¹¶ä¿å­˜è¿›åº¦
- âœ… æäº¤è€ƒè¯•ç­”æ¡ˆ
- âœ… è·å–è‡ªåŠ¨è¯„åˆ†ç»“æœ
- âœ… æŸ¥çœ‹è€ƒè¯•æˆç»©

æ•´ä¸ªè€ƒè¯•æäº¤æµç¨‹ç°åœ¨å®Œå…¨æ­£å¸¸å·¥ä½œï¼
